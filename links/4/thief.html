<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>800x600</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Shizuru&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Liu+Jian+Mao+Cao&display=swap');
@font-face {
 font-family: 'UhBeeGENWOO';
 src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_five@.2.0/UhBeeGENWOO.woff') format('woff');
 font-weight: normal;
 font-style: normal;
}      

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: repeating-linear-gradient(
                to right,
                #333333 0px,
                #333333 40px,
                #000000 40px,
                #000000 45px
            );
        }
        .container {
            display: flex;
            gap: 20px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);

        }
        svg {
            overflow: visible;
        }

        .eye {
            fill: white;
        }

        .eye-stroke {
            fill: none;
            stroke: #E55A67;
            stroke-width: 4;
            mix-blend-mode: multiply;
        }

        .pupil {
            fill: #E55A67;
            stroke: none;
        }

        .eye{
            width: 78.4px; /* 기존 크기의 41.67% */
            height: 52px; /* 기존 크기의 41.67% */
        }

        .random-text {
            position: absolute;
            font-size: 25pt; /* 폰트 크기 축소 */
            color: #333333;
            text-shadow: 1px 1px 0px white;
            z-index: 10;
        }

    </style>
</head>
<body>
    <div class="container">
        <!-- 왼쪽 눈 -->
        <svg id="left-eye-svg" width="308" height="154">
            <defs>
                <!-- 거친 외곽선을 위한 필터 추가 -->
                <filter id="rough-edges">
                    <feTurbulence type="turbulence" baseFrequency="0.03" numOctaves="3" result="turbulence"/>
                    <feDisplacementMap in="SourceGraphic" in2="turbulence" scale="2" xChannelSelector="R" yChannelSelector="G"/>
                </filter>
            </defs>
            
            <!-- 큰 핑크색 직사각형 -->
            <rect x="0" y="0" width="308" height="154" rx="75" ry="75" 
                fill="#E55A67" 
                filter="url(#rough-edges)"
                stroke="#E55A67" 
                stroke-width="1.5"/>
            
            <!-- 흰색 타원 -->
            <defs>
                <clipPath id="clipEllipse1">
                    <ellipse class="eye" cx="154" cy="77" rx="112" ry="46" />
                </clipPath>
            </defs>
            <ellipse class="eye" cx="154" cy="77" rx="112" ry="46" />
            <ellipse class="eye-stroke" cx="154" cy="77" rx="112" ry="46" />
            <!-- image 태그를 타원 그룹으로 대체 -->
            <g id="left-eye" class="eye-image" clip-path="url(#clipEllipse1)" data-center-x="154" data-center-y="77">
                <ellipse class="cls-1" cx="154" cy="77" rx="38" ry="25" fill="#000"/>
                <ellipse class="cls-2" cx="154" cy="77" rx="12" ry="8" fill="#fff"/>
            </g>
            <!-- 클리핑된 핑크색 사각형 - 외곽선 제거 -->
            <g clip-path="url(#clipEllipse1)">
                <rect class="pupil" x="42" y="30" width="224" height="32" stroke="none" />
                <rect class="pupil" x="42" y="92" width="224" height="32" stroke="none" />
            </g>
        </svg>

        <!-- 오른쪽 눈 -->
        <svg id="right-eye-svg" width="308" height="154">
            <defs>
                <filter id="rough-edges2">
                    <feTurbulence type="turbulence" baseFrequency="0.03" numOctaves="3" result="turbulence"/>
                    <feDisplacementMap in="SourceGraphic" in2="turbulence" scale="2" xChannelSelector="R" yChannelSelector="G"/>
                </filter>
            </defs>
            
            <rect x="0" y="0" width="308" height="154" rx="75" ry="75" 
                fill="#E55A67" 
                filter="url(#rough-edges2)"
                stroke="#E55A67" 
                stroke-width="1.5"/>
            
            <!-- 흰색 타원 -->
            <defs>
                <clipPath id="clipEllipse2">
                    <ellipse class="eye" cx="154" cy="77" rx="112" ry="46" />
                </clipPath>
            </defs>
            <ellipse class="eye" cx="154" cy="77" rx="112" ry="46" />
            <ellipse class="eye-stroke" cx="154" cy="77" rx="112" ry="46" />
            <!-- image 태그를 타원 그룹으로 대체 -->
            <g id="right-eye" class="eye-image" clip-path="url(#clipEllipse2)" data-center-x="154" data-center-y="77">
                <ellipse class="cls-1" cx="154" cy="77" rx="38" ry="25" fill="#000"/>
                <ellipse class="cls-2" cx="154" cy="77" rx="12" ry="8" fill="#fff"/>
            </g>
            <!-- 클리핑된 핑크색 사각형 - 외곽선 제거 -->
            <g clip-path="url(#clipEllipse2)">
                <rect class="pupil" x="42" y="30" width="224" height="32" stroke="none" />
                <rect class="pupil" x="42" y="92" width="224" height="32" stroke="none" />
            </g>
        </svg>
    </div>

    <script>
document.addEventListener('DOMContentLoaded', function() {
    const eyes = document.querySelectorAll('.eye');
    const container = document.querySelector('.container');
    const audioFiles = ['../audio/page1/page1_kr.mp3', '../audio/page1/page1_jp.mp3', '../audio/page1/page1_cn.mp3'];
    const texts = ['힐끔힐끔', 'キョロキョロ', '一瞟一瞟'];
    let currentAudio = null;
    let isTextVisible = false;
    let isAudioPlaying = false;

    function playRandomAudio() {
        if (isAudioPlaying) return;
        if (currentAudio) {
            currentAudio.pause();
        }
        const randomIndex = Math.floor(Math.random() * audioFiles.length);
        const audio = new Audio(audioFiles[randomIndex]);
        audio.play();
        currentAudio = audio;
        isAudioPlaying = true;
        audio.onended = () => {
            isAudioPlaying = false;
        };
    }

    function stopAudio() {
        if (currentAudio) {
            currentAudio.pause();
            currentAudio = null;
            isAudioPlaying = false;
        }
    }

    function showRandomText() {
        if (isTextVisible) return;
        const randomIndex = Math.floor(Math.random() * texts.length);
        const text = document.createElement('div');
        text.innerText = texts[randomIndex];
        text.className = 'random-text';
        if (randomIndex === 0) {
            text.style.fontFamily = 'UhBeeGENWOO';
        } else if (randomIndex === 1) {
            text.style.fontFamily = 'Shizuru';
        } else {
            text.style.fontFamily = 'Liu Jian Mao Cao';
        }
        text.style.left = `${Math.random() * (window.innerWidth - 100)}px`;
        text.style.top = `${Math.random() * (window.innerHeight - 100)}px`;

        document.body.appendChild(text);
        isTextVisible = true;
        setTimeout(() => {
            document.body.removeChild(text);
            isTextVisible = false;
        }, 1000);
    }

    function moveEyes(event) {
        const maxMoveX = 80;     // 좌우 최대 이동 거리
        const maxMoveY = 18;     // 상하 최대 이동 거리

        // 컨테이너의 중심점 계산
        const containerRect = container.getBoundingClientRect();
        const containerCenterX = containerRect.left + containerRect.width / 2;
        const containerCenterY = containerRect.top + containerRect.height / 2;

        // 마우스와 컨테이너 중심점 사이의 거리 계산
        const dx = event.clientX - containerCenterX;
        const dy = event.clientY - containerCenterY;

        // 거리에 따른 이동량 계산 (제한값 적용)
        const moveX = Math.min(Math.abs(dx) / 10, maxMoveX) * Math.sign(dx);
        const moveY = Math.min(Math.abs(dy) / 10, maxMoveY) * Math.sign(dy);

        // 양쪽 눈 모두 업데이트
        document.querySelectorAll('#left-eye, #right-eye').forEach(eyeGroup => {
            const baseCenterX = parseFloat(eyeGroup.getAttribute('data-center-x'));
            const baseCenterY = parseFloat(eyeGroup.getAttribute('data-center-y'));

            eyeGroup.querySelectorAll('ellipse').forEach(ellipse => {
                ellipse.setAttribute('cx', baseCenterX + moveX);
                ellipse.setAttribute('cy', baseCenterY + moveY);
            });
        });
    }

    document.addEventListener('mousemove', function(event) {
        moveEyes(event);
        playRandomAudio();
        showRandomText();
    });
});
    </script>
</body>
</html>
